## 값 타입
 
jpa에서는 두가지 데이터 타입이 있다. 첫번째로 ```엔티티 타입```이 존재하고, 두번째로 ```값 타입```이 존재한다.   
```엔티티타입```은 데이터가 변해도 ```식별자로``` 추적이 가능한 반면 ```값 타입```은 식별자가 없기 때문에 변경 시 추적이 불가능하다.

값타입 분류
- 기본값 타입 : 자바 기본타입(int,double), 래퍼클래스(Integer,Long), String
- 임베디드타입
- 컬렉션 값 타입

1. 기본값 타입
: 기본값 타입은 절대 공유하지 못한다. 즉
```java
int a = 1;
int b = a;

b = 3;
```
-> a와 b는 공유되지않고 항상 값을 ```복사```한다

2. 임베디드 타입
: 직접 정의한 새로운 값 타입, 기본값을 모아서 만든 복합 값 타입

![image](https://user-images.githubusercontent.com/46811084/147256288-e7a9d6be-f388-4839-a1bf-81f01692b86d.png)

- ```@Embeddable```: 값 타입을 ```정의```하는 곳에 사용, 위에서는 ```Peroid```와 ```Address```에 사용한다.
- ```@Embedded```: 값 타입을 ```사용```하는 곳에 표시 , 위에서는 Member에서 Period와 Address를 사용하는 곳에 적어준다. 
- ```기본 생성자는 필수```로 적어주자!
- 값 타입을 소유한 엔티티에 ```생명주기```를 의존한다.
- ```@AttributeOverrides```, ```@AttributeOverride```를 사용해서 한 엔티티에서 같은 값 타입을 사용할 수 있다.

임베디드타입의 장점
- 재사용성
- ```Period.isWork()```처럼 해당 값 타입에 사용하는 의미있는 ```메소드```를 만들 수 있다. 

![image](https://user-images.githubusercontent.com/46811084/147256982-92b63788-b4f9-426f-8916-0e9bb5a34e81.png)   
-> 테이블에는 모든 임베디드타입의 값이 컬럼으로 생성된다   

----------------------------------------------------------------------------------------------------------------
## 불변 객체
: 생성 시점 이후 절대 값을 변경할 수 없는 객체

### 불변객체를 사용해야하는 경우
![image](https://user-images.githubusercontent.com/46811084/147532558-437f8b0e-dbc7-42d3-b6c5-b7bf341bc335.png)   
--> 이처럼 임베디드 타입과 같은 ```객체 타입```은 여러 엔티티에서 공유될 가능성이 있다.

![image](https://user-images.githubusercontent.com/46811084/147532765-cefc41cf-01b7-4026-b7cc-af61a535bda8.png)   
--> 이를 방지하기 위해 값을 복사해서 사용하면 공유를 피할 수 있다.  

```java
Address a = new Address('a','1234')
Address b = a; // b는 a의 값을 공유
b.setCity = 'new_city'; // a와 b값 모두 바뀜
```
--> 하지만 ```객체 타입```은 참조값을 직접 대입하는 것을 막을 수 없다. 
.
.
.
따라서 객체 타입을 수정 할 수 없게 ```부작용을 원천차단```해야한다.
이 때, ```생성자```로만 값을 설정하고, ```setter```를 만들지 않는 ```불변객체```를 이용하면 된다.



